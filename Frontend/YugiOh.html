<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>Yu-Gi-Oh! Minimax ‚Äì Forbidden Memories</title>
    <!-- Favicon recomendado -->
  <link rel="icon" href="img/icon.webp" type="image/webp">
  <link rel="icon" href="img/icon.png" type="image/png">
  <link rel="shortcut icon" href="img/icon.ico" type="image/x-icon">

  <link rel="stylesheet" href="css/YugiOh.css" />
</head>
<body>
  <div class="app">
    <header class="app-header">
      <h1>Yu-Gi-Oh! ‚Äì Minimax Trainer</h1>
    </header>

    <main class="board">
      <!-- Zona IA -->
      <section class="zone zone-opponent">
        <div class="zone-header">
          <h2>IA</h2>
          <span id="ai-life" class="life-points">LP: 8000</span>
        </div>

        <div class="field-row">
          <div id="ai-monster-zone" class="monster-zone">
            <!-- Cartas monstruo de la IA -->
          </div>
        </div>

        <div class="hand-row">
          <div id="ai-hand" class="hand hand-opponent">
            <!-- Mano de la IA -->
          </div>
        </div>

        <div class="deck-row">
          <div class="deck-stack">
            <div class="deck-card back"></div>
            <span id="ai-deck-count" class="deck-count">40</span>
            <small>Deck IA</small>
          </div>

          <div class="deck-preview-wrapper">
            <small>Pr√≥ximas cartas IA</small>
            <div id="ai-deck-preview" class="deck-preview"></div>
          </div>
        </div>
      </section>

      <!-- Panel lateral de estado -->
      <aside class="sidebar">
        <div class="panel">
          <h3>Turno</h3>
          <p id="turn-info">Jugador</p>
        </div>

        <div class="panel">
          <h3>Configuraci√≥n de mazo</h3>
          <label for="deck-size-input" style="font-size: 0.8rem; color: #9ca3af;">
            Cartas por mazo (15 - 40)
          </label>
          <input
            id="deck-size-input"
            type="number"
            min="15"
            max="40"
            value="20"
            style="margin-top: 4px; margin-bottom: 6px; width: 100%; padding: 4px 8px; border-radius: 999px; border: 1px solid #4b5563; background:#020617; color:#e5e7eb;"
          />
          <button id="btn-start-game" class="btn">Iniciar duelo</button>
        </div>

        <div class="panel">
          <h3>Acciones</h3>
          <button id="btn-end-turn" class="btn">Terminar turno</button>
          <button id="btn-toggle-fusion" class="btn btn-secondary">Modo Fusi√≥n: OFF</button>
        </div>

        <div class="panel">
          <h3>Navegaci√≥n</h3>

          <button class="btn" style="width: 100%; margin-bottom: 8px;"
            onclick="window.location.href='../Frontend/index.html'">
            Inicio
          </button>

          <button class="btn" style="width: 100%; margin-bottom: 8px;"
            onclick="window.location.href='../Frontend/instrucciones.html'">
            Instrucciones
          </button>

          <!-- üîπ AHORA ESTE BOT√ìN ABRE UN MODAL, NO CAMBIA DE P√ÅGINA -->
          <button class="btn" style="width: 100%; margin-bottom: 8px;"
            id="btn-open-fusions">
            Fusiones
          </button>

        </div>

        <div class="panel">
          <h3>Log</h3>
          <div id="log" class="log"></div>
        </div>
      </aside>

      <!-- Zona jugador -->
      <section class="zone zone-player">
        <div class="zone-header">
          <h2>Jugador</h2>
          <span id="player-life" class="life-points">LP: 8000</span>
        </div>

        <div class="field-row">
          <div id="player-monster-zone" class="monster-zone">
            <!-- Cartas monstruo del jugador -->
          </div>
        </div>

        <div class="hand-row">
          <div id="player-hand" class="hand">
            <!-- Mano del jugador -->
          </div>
        </div>

        <div class="deck-row">
          <div class="deck-stack">
            <div class="deck-card back"></div>
            <span id="player-deck-count" class="deck-count">40</span>
            <small>Tu Deck</small>
          </div>

          <div class="deck-preview-wrapper">
            <small>Pr√≥ximas cartas</small>
            <div id="player-deck-preview" class="deck-preview"></div>
          </div>
        </div>
      </section>
    </main>
  </div>

  <!-- Scripts del juego -->
  <script src="../Backend/cards.js"></script>
  <script src="js/game.js"></script>

  <!-- FX da√±o -->
  <div id="damage-fx" class="damage-fx"></div>

  <!-- Modal fin de partida -->
  <div id="end-modal" class="modal">
    <div class="modal-content">
      <h2>Partida terminada</h2>
      <p id="end-result"></p>
      <p id="end-lp"></p>
      <div class="modal-actions">
        <button id="btn-play-again" class="btn">Jugar otra vez</button>
        <button id="btn-exit" class="btn btn-secondary">Salir</button>
      </div>
    </div>
  </div>

  <!-- Modal de fusiones -->
  <div id="fusion-modal" class="modal">
    <div class="modal-content" style="max-width: 520px; text-align: left;">
      <h2 style="margin-bottom:6px;">Gu√≠a de Fusiones</h2>
      <p style="margin-bottom:12px; font-size:0.9rem; color:#9ca3af;">
        Consulta las combinaciones disponibles.
      </p>

      <div style="max-height: 320px; overflow-y: auto; font-size: 0.85rem; padding-right:4px;">
        <h3 style="color:#38bdf8; margin-top:10px;">üê≤ Dragones</h3>
        <ul style="margin-left:18px; margin-bottom:8px;">
          <li><strong>Mago del Tiempo</strong> + <strong>Beb√© Drag√≥n</strong> ‚Üí Drag√≥n Milenario</li>
          <li><strong>Beb√© Drag√≥n</strong> + <strong>Gigante Hitotsu-Me</strong> ‚Üí Drag√≥n de Koumori</li>
          <li><strong>Beb√© Drag√≥n</strong> + <strong>Pierna Derecha del Prohibido</strong> ‚Üí Drag√≥n de Fuego de la Tierra Negra</li>
          <li><strong>Beb√© Drag√≥n</strong> + <strong>Pierna Izquierda del Prohibido</strong> ‚Üí Drag√≥n de Fuego de la Tierra Negra</li>
          <li><strong>Drag√≥n Alado</strong> + <strong>Brazo Derecho del Prohibido</strong> ‚Üí Drag√≥n de Fuego de la Tierra Negra</li>
          <li><strong>Drag√≥n Alado</strong> + <strong>Brazo Izquierdo del Prohibido</strong> ‚Üí Drag√≥n de Fuego de la Tierra Negra</li>
        </ul>

        <h3 style="color:#38bdf8; margin-top:10px;">‚öîÔ∏è Caballeros / Drag√≥n</h3>
        <ul style="margin-left:18px; margin-bottom:8px;">
          <li><strong>Gaia el Caballero Feroz</strong> + <strong>Maldici√≥n de Drag√≥n</strong> ‚Üí Gaia el Campe√≥n Drag√≥n</li>
        </ul>

        <h3 style="color:#38bdf8; margin-top:10px;">üëπ Demonios / No-Muertos</h3>
        <ul style="margin-left:18px; margin-bottom:8px;">
          <li><strong>Tyhone #2</strong> + <strong>Sirviente de la Calavera</strong> ‚Üí Maldici√≥n de Drag√≥n</li>
          <li><strong>Alma de Hinotama</strong> + <strong>Sirviente de la Calavera</strong> ‚Üí Segador de Fuego</li>
          <li><strong>Espejo de Cambio de Trabajo</strong> + <strong>Ryu-Kishin</strong> ‚Üí Cr√°neo Convocado</li>
          <li><strong>Espejo de Cambio de Trabajo</strong> + <strong>Diablillo de Cuerno</strong> ‚Üí Cr√°neo Convocado</li>
          <li><strong>Mago del Tiempo</strong> + <strong>Bestia Embrionaria</strong> ‚Üí Cr√°neo Convocado</li>
        </ul>

        <h3 style="color:#38bdf8; margin-top:10px;">ü¶ã Insectos</h3>
        <ul style="margin-left:18px; margin-bottom:8px;">
          <li><strong>Larva de Moth</strong> + <strong>Insecto B√°sico</strong> ‚Üí Gran Moth</li>
          <li><strong>Larva de Moth</strong> + <strong>Insecto Grande</strong> ‚Üí Gran Moth</li>
          <li><strong>Larva de Moth</strong> + <strong>Escarabajo H√©rcules</strong> ‚Üí Gran Moth</li>
          <li><strong>Gran Moth</strong> + <strong>Capullo Evolutivo</strong> ‚Üí Gran Moth Definitivo Perfecto</li>
          <li><strong>Escarabajo H√©rcules</strong> + <strong>Capullo Evolutivo</strong> ‚Üí Gran Moth Definitivo Perfecto</li>
        </ul>

        <h3 style="color:#38bdf8; margin-top:10px;">‚öñÔ∏è Juicio / Ley</h3>
        <ul style="margin-left:18px; margin-bottom:8px;">
          <li><strong>La Mano del Juicio</strong> + <strong>Guardi√°n Celta</strong> ‚Üí Hombre Juez</li>
        </ul>

        <h3 style="color:#38bdf8; margin-top:10px;">ü•ö Crianza / Evoluci√≥n</h3>
        <ul style="margin-left:18px; margin-bottom:8px;">
          <li><strong>Buey de Batalla</strong> + <strong>Huevo Monstruo</strong> ‚Üí Beb√© Drag√≥n</li>
        </ul>

        <h3 style="color:#38bdf8; margin-top:10px;">üåä Reptiles / Agua</h3>
        <ul style="margin-left:18px; margin-bottom:8px;">
          <li><strong>Brazo de Espada de Drag√≥n</strong> + <strong>Adicto Kraken</strong> ‚Üí Kairyu-Shin</li>
        </ul>
      </div>

      <div class="modal-actions" style="margin-top:14px;">
        <button id="btn-close-fusions" class="btn">Cerrar</button>
      </div>
    </div>
  </div>

  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const fusionModal = document.getElementById('fusion-modal');
      const openFusionBtn = document.getElementById('btn-open-fusions');
      const closeFusionBtn = document.getElementById('btn-close-fusions');

      if (openFusionBtn && fusionModal && closeFusionBtn) {
        openFusionBtn.addEventListener('click', () => fusionModal.classList.add('show'));
        closeFusionBtn.addEventListener('click', () => fusionModal.classList.remove('show'));

        // Cerrar clicando fuera
        fusionModal.addEventListener('click', (e) => {
          if (e.target === fusionModal) fusionModal.classList.remove('show');
        });
      }
    });
  </script>


  <!-- ===================================================== -->
  <!--         MODAL DE MODO DE INVOCACI√ìN (ATK / DEF)       -->
  <!-- ===================================================== -->

  <div id="mode-modal" class="modal">
    <div class="modal-content" style="max-width: 350px; text-align:center;">
      <h2 style="margin-bottom:10px;">Selecciona Modo</h2>
      <p style="margin-bottom:12px;">¬øC√≥mo quieres invocar esta carta?</p>

      <div class="modal-actions" style="display:flex; gap:10px; justify-content:center;">
        <button id="btn-mode-atk" class="btn">Modo Ataque</button>
        <button id="btn-mode-def" class="btn btn-secondary">Modo Defensa</button>
      </div>

      <div style="margin-top:18px;">
        <button id="btn-mode-cancel" class="btn btn-secondary" style="width:100%;">
          Cancelar
        </button>
      </div>
    </div>
  </div>

  <script>
    function askBattleMode() {
      return new Promise((resolve) => {
        const modal = document.getElementById('mode-modal');
        const btnATK = document.getElementById('btn-mode-atk');
        const btnDEF = document.getElementById('btn-mode-def');
        const btnCancel = document.getElementById('btn-mode-cancel');

        modal.classList.add('show');

        const chooseATK = () => close("atk");
        const chooseDEF = () => close("def");
        const chooseCancel = () => close(null);

        function close(result) {
          modal.classList.remove('show');
          btnATK.removeEventListener("click", chooseATK);
          btnDEF.removeEventListener("click", chooseDEF);
          btnCancel.removeEventListener("click", chooseCancel);
          resolve(result);
        }

        btnATK.addEventListener("click", chooseATK);
        btnDEF.addEventListener("click", chooseDEF);
        btnCancel.addEventListener("click", chooseCancel);
      });
    }
  </script>

</body>
</html>
